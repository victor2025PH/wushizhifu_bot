# Bot åŠŸèƒ½éªŒè¯æ¸…å•

## âœ… å·²å®žçŽ°çš„åŠŸèƒ½

### 1. Bot è®¾ç½®åŠŸèƒ½ï¼ˆ`utils/bot_setup.py`ï¼‰

#### âœ… `setup_bot_commands()` - è®¾ç½® Bot å‘½ä»¤
- **ä½ç½®**: `utils/bot_setup.py:12-28`
- **åŠŸèƒ½**: è®¾ç½® `/start` å’Œ `/help` å‘½ä»¤
- **è°ƒç”¨ä½ç½®**: `bot.py:48` (on_startup)
- **éªŒè¯æ–¹æ³•**: åœ¨ Telegram ä¸­è¾“å…¥ `/` åº”è¯¥èƒ½çœ‹åˆ°å‘½ä»¤åˆ—è¡¨

#### âœ… `setup_menu_button()` - è®¾ç½®èœå•æŒ‰é’®
- **ä½ç½®**: `utils/bot_setup.py:31-47`
- **åŠŸèƒ½**: 
  - åœ¨ Bot ä¸ªäººèµ„æ–™é¡µé¢æ˜¾ç¤ºã€Œæ‰“å¼€åº”ç”¨ã€æŒ‰é’®
  - åœ¨èŠå¤©ç•Œé¢é¡¶éƒ¨æ˜¾ç¤ºã€Œæ‰“å¼€åº”ç”¨ã€æŒ‰é’®
  - ç‚¹å‡»åŽæ‰“å¼€ MiniApp (dashboard)
- **è°ƒç”¨ä½ç½®**: `bot.py:49` (on_startup)
- **éªŒè¯æ–¹æ³•**: 
  - æ‰“å¼€ Bot ä¸ªäººèµ„æ–™é¡µé¢ï¼Œåº”è¯¥çœ‹åˆ°ã€Œæ‰“å¼€åº”ç”¨ã€æŒ‰é’®
  - åœ¨èŠå¤©ç•Œé¢é¡¶éƒ¨ï¼Œåº”è¯¥çœ‹åˆ°ã€Œæ‰“å¼€åº”ç”¨ã€æŒ‰é’®
  - ç‚¹å‡»æŒ‰é’®åº”è¯¥æ‰“å¼€ MiniApp

#### âœ… `setup_bot_info()` - è®¾ç½® Bot æè¿°
- **ä½ç½®**: `utils/bot_setup.py:50-74`
- **åŠŸèƒ½**: è®¾ç½® Bot çš„è¯¦ç»†æè¿°å’Œç®€çŸ­æè¿°
- **è°ƒç”¨ä½ç½®**: `bot.py:50` (on_startup)
- **éªŒè¯æ–¹æ³•**: æŸ¥çœ‹ Bot ä¿¡æ¯é¡µé¢ï¼Œåº”è¯¥æ˜¾ç¤ºæè¿°ä¿¡æ¯

### 2. Bot å¯åŠ¨æ—¶è‡ªåŠ¨é…ç½®

#### âœ… `on_startup()` å‡½æ•°è°ƒç”¨
- **ä½ç½®**: `bot.py:36-63`
- **è°ƒç”¨é¡ºåº**:
  1. åˆå§‹åŒ–æ•°æ®åº“
  2. è®¾ç½® Bot å‘½ä»¤ (`setup_bot_commands`)
  3. è®¾ç½®èœå•æŒ‰é’® (`setup_menu_button`)
  4. è®¾ç½® Bot æè¿° (`setup_bot_info`)
- **éªŒè¯æ–¹æ³•**: æŸ¥çœ‹æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
  ```
  âœ… Bot commands set successfully
  âœ… Menu button set: 'æ‰“å¼€åº”ç”¨' -> https://50zf.usdt2026.cc?view=dashboard
  âœ… Bot description set successfully
  ```

### 3. å‘½ä»¤å¤„ç†å™¨

#### âœ… `/start` å‘½ä»¤
- **ä½ç½®**: `handlers/user_handlers.py:19-51`
- **åŠŸèƒ½**: å‘é€æ¬¢è¿Žæ¶ˆæ¯å’Œä¸»é”®ç›˜
- **éªŒè¯æ–¹æ³•**: å‘é€ `/start` å‘½ä»¤ï¼Œåº”è¯¥æ”¶åˆ°æ¬¢è¿Žæ¶ˆæ¯

#### âœ… `/help` å‘½ä»¤
- **ä½ç½®**: `handlers/user_handlers.py:54-104` (æ–°æ·»åŠ )
- **åŠŸèƒ½**: æ˜¾ç¤ºä½¿ç”¨æŒ‡å—
- **éªŒè¯æ–¹æ³•**: å‘é€ `/help` å‘½ä»¤ï¼Œåº”è¯¥æ”¶åˆ°å¸®åŠ©ä¿¡æ¯

## ðŸ“‹ éƒ¨ç½²æ£€æŸ¥æ­¥éª¤

### 1. ä»£ç æ£€æŸ¥
- [x] `utils/bot_setup.py` æ‰€æœ‰å‡½æ•°å·²å®žçŽ°
- [x] `bot.py` çš„ `on_startup` ä¸­è°ƒç”¨äº†è®¾ç½®å‡½æ•°
- [x] `handlers/user_handlers.py` ä¸­æœ‰ `/help` å‘½ä»¤å¤„ç†å™¨

### 2. éƒ¨ç½²åˆ°æœåŠ¡å™¨

```bash
# 1. è¿›å…¥ Bot ç›®å½•
cd /home/ubuntu/wushizhifu/bot

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 3. æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
source venv/bin/activate

# 4. æ£€æŸ¥é…ç½®æ–‡ä»¶
grep MINIAPP_URL config.py
# åº”è¯¥æ˜¾ç¤ºï¼šMINIAPP_URL: str = "https://50zf.usdt2026.cc"

# 5. é‡å¯ Bot æœåŠ¡
sudo systemctl restart wushizhifu-bot

# 6. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤
sudo journalctl -u wushizhifu-bot -n 50 --no-pager
```

### 3. åŠŸèƒ½éªŒè¯

#### éªŒè¯èœå•æŒ‰é’®
1. æ‰“å¼€ Bot ä¸ªäººèµ„æ–™é¡µé¢
2. æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºã€Œæ‰“å¼€åº”ç”¨ã€æŒ‰é’®
3. ç‚¹å‡»æŒ‰é’®ï¼Œåº”è¯¥æ‰“å¼€ MiniApp

#### éªŒè¯èŠå¤©ç•Œé¢æŒ‰é’®
1. æ‰“å¼€ä¸Ž Bot çš„èŠå¤©ç•Œé¢
2. æ£€æŸ¥é¡¶éƒ¨æ˜¯å¦æ˜¾ç¤ºã€Œæ‰“å¼€åº”ç”¨ã€æŒ‰é’®
3. ç‚¹å‡»æŒ‰é’®ï¼Œåº”è¯¥æ‰“å¼€ MiniApp

#### éªŒè¯å‘½ä»¤
1. åœ¨èŠå¤©ä¸­è¾“å…¥ `/start`ï¼Œåº”è¯¥æ”¶åˆ°æ¬¢è¿Žæ¶ˆæ¯
2. åœ¨èŠå¤©ä¸­è¾“å…¥ `/help`ï¼Œåº”è¯¥æ”¶åˆ°å¸®åŠ©ä¿¡æ¯
3. è¾“å…¥ `/`ï¼Œåº”è¯¥èƒ½çœ‹åˆ°å‘½ä»¤åˆ—è¡¨ï¼ˆåŒ…å« `/start` å’Œ `/help`ï¼‰

#### éªŒè¯ Bot æè¿°
1. æ‰“å¼€ Bot ä¿¡æ¯é¡µé¢
2. æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºæè¿°ä¿¡æ¯ï¼ˆåŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨è¯´æ˜Žï¼‰

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1: èœå•æŒ‰é’®æ²¡æœ‰æ˜¾ç¤º
**å¯èƒ½åŽŸå› **:
- Bot æœåŠ¡æœªæ­£ç¡®å¯åŠ¨
- `setup_menu_button` å‡½æ•°æ‰§è¡Œå¤±è´¥

**è§£å†³æ–¹æ³•**:
```bash
# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u wushizhifu-bot -n 100 --no-pager | grep -i "menu button"

# é‡å¯æœåŠ¡
sudo systemctl restart wushizhifu-bot
```

### é—®é¢˜ 2: Bot æè¿°æ²¡æœ‰æ›´æ–°
**å¯èƒ½åŽŸå› **:
- Bot æè¿°éœ€è¦é€šè¿‡ BotFather æ‰‹åŠ¨è®¾ç½®
- API å¯èƒ½ä¸æ”¯æŒè‡ªåŠ¨è®¾ç½®æè¿°

**è§£å†³æ–¹æ³•**:
1. æ‰“å¼€ [@BotFather](https://t.me/BotFather)
2. å‘é€ `/setdescription`
3. é€‰æ‹©ä½ çš„ Bot
4. è¾“å…¥æè¿°å†…å®¹

### é—®é¢˜ 3: `/help` å‘½ä»¤æ²¡æœ‰å“åº”
**å¯èƒ½åŽŸå› **:
- ä»£ç æœªéƒ¨ç½²åˆ°æœåŠ¡å™¨
- æœåŠ¡æœªé‡å¯

**è§£å†³æ–¹æ³•**:
```bash
# ç¡®è®¤ä»£ç å·²æ›´æ–°
cd /home/ubuntu/wushizhifu/bot
git log -1 --oneline

# é‡å¯æœåŠ¡
sudo systemctl restart wushizhifu-bot

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u wushizhifu-bot -f
```

## ðŸ“ æ—¥å¿—ç¤ºä¾‹ï¼ˆæˆåŠŸå¯åŠ¨ï¼‰

```
2025-XX-XX XX:XX:XX - INFO - âœ… Database initialized
2025-XX-XX XX:XX:XX - INFO - âœ… Bot commands set successfully
2025-XX-XX XX:XX:XX - INFO - âœ… Menu button set: 'æ‰“å¼€åº”ç”¨' -> https://50zf.usdt2026.cc?view=dashboard
2025-XX-XX XX:XX:XX - INFO - âœ… Bot description set successfully
2025-XX-XX XX:XX:XX - INFO - ðŸ¤– Bot: @your_bot_name (WuShiPay Bot)
2025-XX-XX XX:XX:XX - INFO - âœ… WuShiPay System Initialized Successfully
```

