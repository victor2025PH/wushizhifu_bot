# éƒ¨ç½²ä¿®å¤åçš„ä»£ç 

## ğŸ“‹ ä¿®å¤å†…å®¹

æœ¬æ¬¡ä¿®å¤è§£å†³äº†æ‰€æœ‰ MarkdownV2 æ ¼å¼åŒ–é”™è¯¯ï¼ŒåŒ…æ‹¬ï¼š

1. âœ… é‡‘é¢æ ¼å¼åŒ–é”™è¯¯ï¼ˆ`.` å’Œ `,` æœªè½¬ä¹‰ï¼‰
2. âœ… ç™¾åˆ†æ¯”æ ¼å¼åŒ–é”™è¯¯ï¼ˆ`.` æœªè½¬ä¹‰ï¼‰
3. âœ… æ•°å­—æ ¼å¼åŒ–é”™è¯¯
4. âœ… ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰é—®é¢˜

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# 1. ä¸Šä¼ è„šæœ¬åˆ°æœåŠ¡å™¨
# å°† éƒ¨ç½²ä¿®å¤åçš„ä»£ç .sh ä¸Šä¼ åˆ°æœåŠ¡å™¨

# 2. èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x ~/wushizhifu/bot/éƒ¨ç½²ä¿®å¤åçš„ä»£ç .sh

# 3. æ‰§è¡Œéƒ¨ç½²
~/wushizhifu/bot/éƒ¨ç½²ä¿®å¤åçš„ä»£ç .sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/wushizhifu/bot

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 3. æ¸…ç† Python ç¼“å­˜
find . -type d -name "__pycache__" -exec rm -r {} + 2>/dev/null
find . -type f -name "*.pyc" -delete 2>/dev/null

# 4. é‡å¯ Bot æœåŠ¡
sudo systemctl restart wushizhifu-bot

# 5. æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status wushizhifu-bot

# 6. æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo journalctl -u wushizhifu-bot -f
```

## âœ… éªŒè¯ä¿®å¤

éƒ¨ç½²åï¼Œè¯·æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ”¯ä»˜åŠŸèƒ½**
   - ç‚¹å‡»ã€Œæ”¯ä»˜å®ã€æˆ–ã€Œå¾®ä¿¡æ”¯ä»˜ã€
   - é€‰æ‹©ã€Œæ”¶æ¬¾ã€æˆ–ã€Œä»˜æ¬¾ã€
   - è¾“å…¥é‡‘é¢ï¼ˆå¦‚ï¼š1000ï¼‰
   - âœ… åº”è¯¥æ­£å¸¸æ˜¾ç¤ºè®¢å•è¯¦æƒ…ï¼Œæ— é”™è¯¯

2. **é’±åŒ…åŠŸèƒ½**
   - ç‚¹å‡»ã€Œæˆ‘çš„é’±åŒ…ã€
   - âœ… åº”è¯¥æ­£å¸¸æ˜¾ç¤ºä½™é¢å’Œç»Ÿè®¡ä¿¡æ¯ï¼Œæ— é”™è¯¯

3. **äº¤æ˜“è®°å½•**
   - ç‚¹å‡»ã€Œäº¤æ˜“è®°å½•ã€
   - âœ… åº”è¯¥æ­£å¸¸æ˜¾ç¤ºäº¤æ˜“åˆ—è¡¨ï¼Œæ— é”™è¯¯

4. **è®¡ç®—å™¨**
   - ç‚¹å‡»ã€Œæ±‡ç‡è®¡ç®—å™¨ã€
   - é€‰æ‹©è´¹ç‡è®¡ç®—æˆ–æ±‡ç‡è½¬æ¢
   - âœ… åº”è¯¥æ­£å¸¸æ˜¾ç¤ºè®¡ç®—ç»“æœï¼Œæ— é”™è¯¯

5. **ç»Ÿè®¡ä¿¡æ¯**
   - ç‚¹å‡»ã€Œç»Ÿè®¡ä¿¡æ¯ã€
   - âœ… åº”è¯¥æ­£å¸¸æ˜¾ç¤ºç»Ÿè®¡æ•°æ®ï¼Œæ— é”™è¯¯

6. **ä¸ªäººè®¾ç½®**
   - ç‚¹å‡»ã€Œä¸ªäººè®¾ç½®ã€â†’ã€Œè´¦æˆ·ä¿¡æ¯ã€
   - âœ… åº”è¯¥æ­£å¸¸æ˜¾ç¤ºè´¦æˆ·ä¿¡æ¯ï¼Œæ— é”™è¯¯

## ğŸ” å¦‚æœä»æœ‰é”™è¯¯

å¦‚æœéƒ¨ç½²åä»æœ‰é”™è¯¯ï¼Œè¯·ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   sudo journalctl -u wushizhifu-bot -f
   ```

2. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**
   ```bash
   sudo systemctl status wushizhifu-bot
   ```

3. **ç¡®è®¤ä»£ç å·²æ›´æ–°**
   ```bash
   cd ~/wushizhifu/bot
   git log -1
   ```

4. **é‡æ–°æ¸…ç†ç¼“å­˜å¹¶é‡å¯**
   ```bash
   find . -type d -name "__pycache__" -exec rm -r {} + 2>/dev/null
   find . -type f -name "*.pyc" -delete 2>/dev/null
   sudo systemctl restart wushizhifu-bot
   ```

## ğŸ“ ä¿®å¤çš„æ–‡ä»¶åˆ—è¡¨

- `utils/text_utils.py` - æ–°å¢æ ¼å¼åŒ–å‡½æ•°
- `handlers/payment_handlers.py` - ä¿®å¤é‡‘é¢æ˜¾ç¤º
- `handlers/wallet_handlers.py` - ä¿®å¤é‡‘é¢å’Œæ•°å­—æ˜¾ç¤º
- `handlers/user_handlers.py` - ä¿®å¤ç»Ÿè®¡ä¿¡æ¯
- `handlers/transaction_handlers.py` - ä¿®å¤äº¤æ˜“è®°å½•
- `handlers/calculator_handlers.py` - ä¿®å¤è®¡ç®—ç»“æœ
- `handlers/settings_handlers.py` - ä¿®å¤è´¦æˆ·ä¿¡æ¯
- `handlers/admin_handlers.py` - ä¿®å¤ç®¡ç†å‘˜ç»Ÿè®¡
- `services/message_service.py` - æ·»åŠ æ ¼å¼åŒ–å‡½æ•°å¯¼å…¥

## ğŸ¯ é¢„æœŸæ•ˆæœ

ä¿®å¤åï¼Œæ‰€æœ‰æŒ‰é’®ç‚¹å‡»åº”è¯¥ï¼š
- âœ… ä¸å†å‡ºç° `TelegramBadRequest` é”™è¯¯
- âœ… é‡‘é¢ã€æ•°å­—ã€ç™¾åˆ†æ¯”æ­£ç¡®æ˜¾ç¤º
- âœ… ç”¨æˆ·ç•Œé¢æ­£å¸¸ï¼Œæ— é”™è¯¯å¼¹çª—
- âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

